import{h as H,j as u,t as f,v as E,i as P,r as S,w as z,m as W,V as M,x as N,z as O,y as _,o as j,n as k,W as A,X as U,Y as Q,Z as I,$ as D,A as K}from"./index.f77abd2b.js";import{Q as R}from"./QResizeObserver.ef169933.js";import{g as X,d as Y,e as Z,f as V}from"./QCard.cba0760b.js";var le=H({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:g}){const n=u(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>f("div",{class:n.value},E(g.default))}}),ne=H({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:g}){const n=u(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>f("div",{class:n.value,role:"toolbar"},E(g.default))}}),ae=H({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:g,emit:n}){const{proxy:{$q:i}}=O(),l=N(_,P);if(l===P)return console.error("QHeader needs to be child of QLayout"),P;const d=S(parseInt(e.heightHint,10)),s=S(!0),b=u(()=>e.reveal===!0||l.view.value.indexOf("H")>-1||i.platform.is.ios&&l.isContainer.value===!0),h=u(()=>{if(e.modelValue!==!0)return 0;if(b.value===!0)return s.value===!0?d.value:0;const t=d.value-l.scroll.value.position;return t>0?t:0}),r=u(()=>e.modelValue!==!0||b.value===!0&&s.value!==!0),p=u(()=>e.modelValue===!0&&r.value===!0&&e.reveal===!0),y=u(()=>"q-header q-layout__section--marginal "+(b.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(r.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),w=u(()=>{const t=l.rows.value.top,v={};return t[0]==="l"&&l.left.space===!0&&(v[i.lang.rtl===!0?"right":"left"]=`${l.left.size}px`),t[2]==="r"&&l.right.space===!0&&(v[i.lang.rtl===!0?"left":"right"]=`${l.right.size}px`),v});function a(t,v){l.update("header",t,v)}function m(t,v){t.value!==v&&(t.value=v)}function L({height:t}){m(d,t),a("size",t)}function $(t){p.value===!0&&m(s,!0),n("focusin",t)}z(()=>e.modelValue,t=>{a("space",t),m(s,!0),l.animate()}),z(h,t=>{a("offset",t)}),z(()=>e.reveal,t=>{t===!1&&m(s,e.modelValue)}),z(s,t=>{l.animate(),n("reveal",t)}),z(l.scroll,t=>{e.reveal===!0&&m(s,t.direction==="up"||t.position<=e.revealOffset||t.position-t.inflectionPoint<100)});const q={};return l.instances.header=q,e.modelValue===!0&&a("size",d.value),a("space",e.modelValue),a("offset",h.value),W(()=>{l.instances.header===q&&(l.instances.header=void 0,a("size",0),a("offset",0),a("space",!1))}),()=>{const t=M(g.default,[]);return e.elevated===!0&&t.push(f("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(f(R,{debounce:0,onResize:L})),f("header",{class:y.value,style:w.value,onFocusin:$},t)}}});const{passive:F}=A,G=["both","horizontal","vertical"];var J=H({name:"QScrollObserver",props:{axis:{type:String,validator:e=>G.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(e,{emit:g}){const n={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let i=null,l,d;z(()=>e.scrollTarget,()=>{h(),b()});function s(){i!==null&&i();const y=Math.max(0,Y(l)),w=Z(l),a={top:y-n.position.top,left:w-n.position.left};if(e.axis==="vertical"&&a.top===0||e.axis==="horizontal"&&a.left===0)return;const m=Math.abs(a.top)>=Math.abs(a.left)?a.top<0?"up":"down":a.left<0?"left":"right";n.position={top:y,left:w},n.directionChanged=n.direction!==m,n.delta=a,n.directionChanged===!0&&(n.direction=m,n.inflectionPoint=n.position),g("scroll",{...n})}function b(){l=X(d,e.scrollTarget),l.addEventListener("scroll",r,F),r(!0)}function h(){l!==void 0&&(l.removeEventListener("scroll",r,F),l=void 0)}function r(y){if(y===!0||e.debounce===0||e.debounce==="0")s();else if(i===null){const[w,a]=e.debounce?[setTimeout(s,e.debounce),clearTimeout]:[requestAnimationFrame(s),cancelAnimationFrame];i=()=>{a(w),i=null}}}const{proxy:p}=O();return z(()=>p.$q.lang.rtl,s),j(()=>{d=p.$el.parentNode,b()}),W(()=>{i!==null&&i(),h()}),Object.assign(p,{trigger:r,getPosition:()=>n}),k}}),ie=H({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:g,emit:n}){const{proxy:{$q:i}}=O(),l=S(null),d=S(i.screen.height),s=S(e.container===!0?0:i.screen.width),b=S({position:0,direction:"down",inflectionPoint:0}),h=S(0),r=S(U.value===!0?0:V()),p=u(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),y=u(()=>e.container===!1?{minHeight:i.screen.height+"px"}:null),w=u(()=>r.value!==0?{[i.lang.rtl===!0?"left":"right"]:`${r.value}px`}:null),a=u(()=>r.value!==0?{[i.lang.rtl===!0?"right":"left"]:0,[i.lang.rtl===!0?"left":"right"]:`-${r.value}px`,width:`calc(100% + ${r.value}px)`}:null);function m(o){if(e.container===!0||document.qScrollPrevented!==!0){const c={position:o.position.top,direction:o.direction,directionChanged:o.directionChanged,inflectionPoint:o.inflectionPoint.top,delta:o.delta.top};b.value=c,e.onScroll!==void 0&&n("scroll",c)}}function L(o){const{height:c,width:T}=o;let x=!1;d.value!==c&&(x=!0,d.value=c,e.onScrollHeight!==void 0&&n("scrollHeight",c),q()),s.value!==T&&(x=!0,s.value=T),x===!0&&e.onResize!==void 0&&n("resize",o)}function $({height:o}){h.value!==o&&(h.value=o,q())}function q(){if(e.container===!0){const o=d.value>h.value?V():0;r.value!==o&&(r.value=o)}}let t=null;const v={instances:{},view:u(()=>e.view),isContainer:u(()=>e.container),rootRef:l,height:d,containerHeight:h,scrollbarWidth:r,totalWidth:u(()=>s.value+r.value),rows:u(()=>{const o=e.view.toLowerCase().split(" ");return{top:o[0].split(""),middle:o[1].split(""),bottom:o[2].split("")}}),header:Q({size:0,offset:0,space:!1}),right:Q({size:300,offset:0,space:!1}),footer:Q({size:0,offset:0,space:!1}),left:Q({size:300,offset:0,space:!1}),scroll:b,animate(){t!==null?clearTimeout(t):document.body.classList.add("q-body--layout-animate"),t=setTimeout(()=>{t=null,document.body.classList.remove("q-body--layout-animate")},155)},update(o,c,T){v[o][c]=T}};if(K(_,v),V()>0){let T=function(){o=null,c.classList.remove("hide-scrollbar")},x=function(){if(o===null){if(c.scrollHeight>i.screen.height)return;c.classList.add("hide-scrollbar")}else clearTimeout(o);o=setTimeout(T,300)},C=function(B){o!==null&&B==="remove"&&(clearTimeout(o),T()),window[`${B}EventListener`]("resize",x)},o=null;const c=document.body;z(()=>e.container!==!0?"add":"remove",C),e.container!==!0&&C("add"),I(()=>{C("remove")})}return()=>{const o=D(g.default,[f(J,{onScroll:m}),f(R,{onResize:L})]),c=f("div",{class:p.value,style:y.value,ref:e.container===!0?void 0:l,tabindex:-1},o);return e.container===!0?f("div",{class:"q-layout-container overflow-hidden",ref:l},[f(R,{onResize:$}),f("div",{class:"absolute-full",style:w.value},[f("div",{class:"scroll",style:a.value},[c])])]):c}}});export{ae as Q,ne as a,le as b,ie as c};
