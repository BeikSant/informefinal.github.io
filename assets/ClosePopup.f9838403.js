import{h as te,r as O,j as m,w as k,m as x,f as E,b as q,t as _,ac as oe,z as ne,v as ae,g as ie,c as se,a2 as re}from"./index.f77abd2b.js";import{o as le,u as ue,p as ce,v as D,q as de,a as fe,r as he,b as ve,s as me,t as pe,w as ge,d as ye,x as Te,y as H,z as be,c as L,A,B as Pe,C as Se,D as we}from"./QDialog.eb5986ff.js";import{g as Ce}from"./QCard.cba0760b.js";var Ee=te({name:"QTooltip",inheritAttrs:!1,props:{...le,...ue,...ce,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:D},self:{type:String,default:"top middle",validator:D},offset:{type:Array,default:()=>[14,14],validator:de},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...fe],setup(e,{slots:o,emit:n,attrs:s}){let r,u;const p=ne(),{proxy:{$q:i}}=p,c=O(null),h=O(!1),j=m(()=>A(e.anchor,i.lang.rtl)),K=m(()=>A(e.self,i.lang.rtl)),N=m(()=>e.persistent!==!0),{registerTick:Q,removeTick:W}=he(),{registerTimeout:v}=ve(),{transitionProps:z,transitionStyle:B}=me(e),{localScrollTarget:T,changeScrollEvent:I,unconfigureScrollTarget:R}=pe(e,w),{anchorEl:a,canShow:U,anchorEvents:d}=ge({showing:h,configureAnchorEl:Y}),{show:V,hide:g}=ye({showing:h,canShow:U,handleShow:F,handleHide:G,hideOnRouteChange:N,processOnMount:!0});Object.assign(d,{delayShow:J,delayHide:X});const{showPortal:b,hidePortal:P,renderPortal:$}=Te(p,c,ee,"tooltip");if(i.platform.is.mobile===!0){const t={anchorEl:a,innerRef:c,onClickOutside(l){return g(l),l.target.classList.contains("q-dialog__backdrop")&&ie(l),!0}},y=m(()=>e.modelValue===null&&e.persistent!==!0&&h.value===!0);k(y,l=>{(l===!0?Pe:H)(t)}),x(()=>{H(t)})}function F(t){b(),Q(()=>{u=new MutationObserver(()=>f()),u.observe(c.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),f(),w()}),r===void 0&&(r=k(()=>i.screen.width+"|"+i.screen.height+"|"+e.self+"|"+e.anchor+"|"+i.lang.rtl,f)),v(()=>{b(!0),n("show",t)},e.transitionDuration)}function G(t){W(),P(),S(),v(()=>{P(!0),n("hide",t)},e.transitionDuration)}function S(){u!==void 0&&(u.disconnect(),u=void 0),r!==void 0&&(r(),r=void 0),R(),E(d,"tooltipTemp")}function f(){const t=c.value;a.value===null||!t||be({el:t,offset:e.offset,anchorEl:a.value,anchorOrigin:j.value,selfOrigin:K.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function J(t){if(i.platform.is.mobile===!0){L(),document.body.classList.add("non-selectable");const y=a.value,l=["touchmove","touchcancel","touchend","click"].map(C=>[y,C,"delayHide","passiveCapture"]);q(d,"tooltipTemp",l)}v(()=>{V(t)},e.delay)}function X(t){i.platform.is.mobile===!0&&(E(d,"tooltipTemp"),L(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),v(()=>{g(t)},e.hideDelay)}function Y(){if(e.noParentEvent===!0||a.value===null)return;const t=i.platform.is.mobile===!0?[[a.value,"touchstart","delayShow","passive"]]:[[a.value,"mouseenter","delayShow","passive"],[a.value,"mouseleave","delayHide","passive"]];q(d,"anchor",t)}function w(){if(a.value!==null||e.scrollTarget!==void 0){T.value=Ce(a.value,e.scrollTarget);const t=e.noParentEvent===!0?f:g;I(T.value,t)}}function Z(){return h.value===!0?_("div",{...s,ref:c,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",s.class],style:[s.style,B.value],role:"tooltip"},ae(o.default)):null}function ee(){return _(oe,z.value,Z)}return x(S),Object.assign(p.proxy,{updatePosition:f}),$}});function M(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const o=parseInt(e,10);return isNaN(o)?0:o}var qe=se({name:"close-popup",beforeMount(e,{value:o}){const n={depth:M(o),handler(s){n.depth!==0&&setTimeout(()=>{const r=Se(e);r!==void 0&&we(r,s,n.depth)})},handlerKey(s){re(s,13)===!0&&n.handler(s)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:o,oldValue:n}){o!==n&&(e.__qclosepopup.depth=M(o))},beforeUnmount(e){const o=e.__qclosepopup;e.removeEventListener("click",o.handler),e.removeEventListener("keyup",o.handlerKey),delete e.__qclosepopup}});export{qe as C,Ee as Q};
