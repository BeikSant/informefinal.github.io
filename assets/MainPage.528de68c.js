import{r as c,E as s,P as b,F as p,G as n,H as aa,K as t,L as d,Q as m,O as V,T as N,R as q,M as y,N as F,U as _,q as Ne,av as la}from"./index.f77abd2b.js";import{m as R,h as Ke,i as ie,j as se,k as ue,l as ge}from"./QDialog.eb5986ff.js";import{Q as Ee,a as xe,b as Ae,c as De}from"./QTabPanels.16beaa3a.js";import{b as ta,Q as oa,a as Qe}from"./QTable.8e0fe829.js";import{Q as $e,a as Ie}from"./QTd.ec8175d6.js";import{Q as we,C as Ue}from"./ClosePopup.f9838403.js";import{a as x,Q as _e}from"./QForm.f6f09dea.js";import{c as re,b as na,Q as Oe}from"./QCard.cba0760b.js";import{Q as ze}from"./QCardActions.ab5a597e.js";import{i as ia,c as Y,e as de,g as sa,o as Z,a as ee,d as ae}from"./especifica-controller.1a8a6627.js";import{p as ua}from"./periodo-controller.7b813b41.js";import{d as ra}from"./distributivo.1df1b02f.js";import{f as da}from"./downloadPdf.508fda78.js";import"./QResizeObserver.ef169933.js";import"./touch.70a9dd44.js";const ca={class:"q-ma-md"},va={key:0},ma={class:"row justify-between"},fa=d("div",{class:"col-9"},[d("div",{class:"col q-table__title",inline:""},[d("b",null,"Gesti\xF3n del Informe Final")])],-1),ba={class:"col-3",align:"right"},pa={class:"col q-table__title"},ga={style:{display:"inline"}},wa={style:{display:"inline"}},_a={style:{display:"inline"}},Oa={class:"card-title-gestionar q-pa-md"},ha={class:"row justify-between items-center"},ka={key:0,class:"col-1"},ya={key:1,class:"col-1"},Ca={class:"col-9"},Va={class:"col-1"},Na={class:"col-9"},Ka={class:"col-1"},Ea={class:"text-h6"},xa={class:"row"},Aa={class:"col-10"},Da={class:"col-2",align:"right"},Qa={class:"row justify-between items-center"},$a={key:0,class:"col-1"},Ia={key:1,class:"col-1"},Ua={key:0,class:"col-8"},za={key:1,class:"col-8"},Pa={class:"col-2",align:"right"},Sa={key:0,class:"col-10"},qa={key:1,class:"col-10"},Fa={class:"col-2",align:"right"},Ta={class:"text-h6"},Ra={class:"q-ml-sm"},nl={__name:"MainPage",setup(ja){const w=aa(),ce=c(!1),K=c(null),Q=c(null),h=c(null),E=c(null),k=c(null),$=c(null),A=c(""),ve=c([]),f=c({id:null,nombre:null,evidencias:[],observaciones:[],desarrolladas:[]}),I=c("actividadesdesarrolladas"),le=c(null),te=c(null),B=c(!1),he=na(),me=c(""),fe=c(!1),U=c(""),j=c(""),G=c(0),oe=c([]),v=c(null),ne=c({estado:!1}),T=c(null),L=c([]),D=c([]),z=c(null),M=c(!1),Pe=[{name:"nombre",label:"Nombre",sortable:!0,field:"nombre",align:"left"},{name:"horas",label:"Horas",sortable:!1,field:"horas",align:"center"},{name:"actividadDesarrollada",label:"Actividades Desarrolladas",sortable:!1,field:"actividadDesarrollada",align:"center"},{name:"evidencia",label:"Evidencias",sortable:!1,field:"evidencia",align:"center"},{name:"observacion",label:"Observaciones",sortable:!1,field:"observacion",align:"center"}],O=c("false"),P=c(null),C=c(null),Se=async()=>{await ua.obtenerUltimoPeriodo(l=>{if(l.status==401)return i("NO OK",l.message),w.push({path:"/"});if(l.status!=200)return i("NO OK",l.message);ne.value=l.data.periodo,qe()})},qe=async()=>{await ia.obtenerInformePeriodo(ne.value.nombre,async l=>{if(l.status==401)return i("NO OK",l.message),w.push({path:"/"});if(l.status!=200)return i("NO OK",l.message);T.value=l.data.informeFinal,await Fe(),H(),J()})},H=async()=>{await Y.obtenerPorInforme(T.value._id,l=>{if(l.status==401)return i("NO OK",l.message),w.push({path:"/"});if(l.status!=200)return i("NO OK","Ocurri\xF3 un error al obtener las"+T.value.conclusionesRecomendaciones);ve.value=l.data})},Fe=async()=>{await ra.obtenerTodasActividades(l=>{if(l.status==401)return i("NO OK",l.message),w.push({path:"/"});if(l.status!=200)return i("NO OK",l.message);L.value=l.data.actividades.funcionesSustantivas;for(let e=0;e<L.value.length;e++)D.value.push({nombre:L.value[e].nombre,actividadesEspecificas:[]});z.value=D.value[0].nombre})},J=async()=>{await de.obtenerActividadesPorInforme(T.value._id,l=>{if(l.status==401)return i("NO OK",l.message),w.push({path:"/"});if(l.status!=200)return i("NO OK",l.message);const e=l.data.actividadesEspecificas;for(let a=0;a<D.value.length;a++)D.value[a].actividadesEspecificas=[];for(let a=0;a<e.length;a++)for(let u=0;u<D.value.length;u++)e[a].actividadDistributivo.funcionSustantiva.nombre==D.value[u].nombre&&D.value[u].actividadesEspecificas.push(e[a])})},Te=async()=>{await da.obtenerInformeActivo(l=>{if(l.status==401)return i("NO OK",l.message),w.push({path:"/"});if(l.status!=200)return i("NO OK",l.message);v.value=l.data,f.value.informacion=[],f.value.informacion.push({nombre:v.value.actividadesDesarrolladas,data:[]}),f.value.informacion.push({nombre:v.value.evidencias,data:[]}),f.value.informacion.push({nombre:v.value.observaciones,data:[]})})};function Re(l){te.value=l,B.value=!0}async function je(){await de.eliminarActividad(te.value._id,l=>{if(l.status==401)return i("NO OK",l.message),w.push({path:"/"});if(l.status!=200)return i("NO OK","Ocurri\xF3 un error al eliminar la actividad");J(),te.value=null,B.value=!1})}function ke(){oe.value=[];const l=L.value.filter(e=>e.nombre==z.value);for(let e=0;e<l[0].actividadesDistributivo.length;e++)oe.value.push(l[0].actividadesDistributivo[e].sigla)}async function Be(){await W(),ke(),me.value="Agregar nueva actividad de: ",M.value=!0}async function Ge(l){if(A.value==null||A.value=="")return;const e={nombre:A.value};await Y.editar(l,e,a=>a.status==401?(i("NO OK",a.message),w.push({path:"/"})):a.status!=200?i("NO OK","Ocurri\xF3 un error al guardar la informaci\xF3n"):(i("OK","Campo editato con \xE9xito"),A.value=null,$.value=null,H()))}async function Le(l){A.value=null,$.value=null,await Y.eliminar(l,e=>e.status==401?(i("NO OK",e.message),w.push({path:"/"})):e.status!=200?i("NO OK","Error al eliminar"):(i("OK","Item eliminado con \xE9xito"),H()))}async function Me(){if(A.value=null,$.value=null,Q.value==null||Q.value=="")return;const l={nombre:Q.value,informe:T.value._id};await Y.crear(l,e=>e.status==401?(i("NO OK",e.message),w.push({path:"/"})):e.status!=200?i("NO OK",e.message):(i("OK","Informaci\xF3n guardada con \xE9xito"),Q.value=null,H()))}async function He(l){await W(),ke(),me.value="Editar actividad espec\xEDfica",fe.value=!0,U.value=l.row.nombre.split("-")[0],j.value=l.row.nombre.substring(U.value.length+1,l.row.nombre.length).split("_").join(" "),G.value=l.row.horas,M.value=!0,le.value=l.row}async function Je(){const l={nombre:U.value+"-"+j.value.replace(/\s+/g,"_"),horas:+G.value},a=L.value.filter(u=>u.nombre==z.value)[0].actividadesDistributivo.filter(u=>u.sigla==U.value);fe.value?(U.value!=le.value.actividadDistributivo.sigla&&(l.actividadesDistributivo=a[0]._id),await de.editarActividad(le.value._id,l,u=>{if(u.status==401)return i("NO OK",u.message),w.push({path:"/"});if(u.status!=200)return i("NO OK","Ocurri\xF3 un error al editar la actividad");i("OK","Actividad editada con \xE9xito"),W(),J()})):await de.crearActividad(T.value._id,a[0]._id,l,u=>{if(u.status==401)return i("NO OK",u.message),w.push({path:"/"});if(u.status!=200)return i("NO OK","Ocurri\xF3 un error al guardar la actividad");i("OK","Actividad guardada con \xE9xito"),W(),J()})}async function W(){M.value=!1,fe.value=!1,le.value=null,j.value="",G.value=0,U.value="",oe.value=[]}async function be(l){let e={actividadEspecifica:l},a=null;switch(I.value){case v.value.actividadesDesarrolladas:if(K.value==null||K.value=="")return K.value="";e.nombre=K.value,a=await ae.crearDesarrollada(e),K.value=null;break;case v.value.evidencias:if(h.value==null)return h.value="";e.nombre=h.value,a=await ee.crearEvidencia(e),h.value=null;break;case v.value.observaciones:if(E.value==null||E.value=="")return E.value="";if(k.value!=null&&k.value!=""&&!pe(k.value))return;e.nombre=E.value,k.value!=null&&k.value!=""&&(e.enlace=k.value),a=await Z.crearObservacion(e),E.value=null,k.value=null;break}if(a.status==401)return i("NO OK",a.message),w.push({path:"/"});if(a.status!=200)return i("NO OK",a.message);i("OK",a.data.message),X(l)}async function ye(l){if(O.value==null||O.value=="")return;let e={nombre:O.value},a=null;switch(I.value){case v.value.actividadesDesarrolladas:a=await ae.editarDesarrollada(l,e);break;case v.value.evidencias:a=await ee.editarEvidencia(l,e);break;case v.value.observaciones:(C.value!=null||C.value!="")&&(e.enlace=C.value),a=await Z.editarObservacion(l,e);break}if(a.status==401)return i("NO OK",a.message),w.push({path:"/"});if(a.status!=200)return i("NO OK",a.message);i("OK","Item eliminado con \xE9xito"),X(f.value.id),O.value=null,P.value=null,C.value=null}async function We(l){O.value=null,P.value=null,C.value=null;let e=null;switch(I.value){case v.value.actividadesDesarrolladas:e=await ae.eliminarDesarrollada(l);break;case v.value.evidencias:e=await ee.eliminarEvidencia(l);break;case v.value.observaciones:e=await Z.eliminarObservacion(l);break}if(e.status==401)return i("NO OK",e.message),w.push({path:"/"});if(e.status!=200)return i("NO OK",e.message);i("OK","Item eliminado con \xE9xito"),X(f.value.id)}async function Xe(l,e){X(l,e),I.value=v.value.actividadesDesarrolladas,ce.value=!0}async function X(l,e){K.value=null,h.value=null,E.value=null,k.value=null,await ee.obtenerEvidencias(l,async a=>{if(a.status==401)return i("NO OK",a.message),w.push({path:"/"});if(a.status!=200)return i("NO OK","Ocurri\xF3 un error al obtener las evidencias");const u=a.data.evidencias;await ae.obtenerDesarrolladas(l,async o=>{if(o.status==401)return i("NO OK",o.message),w.push({path:"/"});if(o.status!=200)return i("NO OK","Ocurri\xF3 un error al obtener las actividades desarrolladas");const g=o.data.actividadesDesarrolladas;await Z.obtenerObservaciones(l,r=>{if(r.status==401)return i("NO OK",r.message),w.push({path:"/"});if(r.status!=200)return i("NO OK","Ocurri\xF3 un error al obtener las observaciones");const ea=r.data.observaciones;f.value.id=l,f.value.nombre=e;for(let S=0;S<f.value.informacion.length;S++)f.value.informacion[S].nombre==v.value.actividadesDesarrolladas?f.value.informacion[S].data=g:f.value.informacion[S].nombre==v.value.evidencias?f.value.informacion[S].data=u:f.value.informacion[S].nombre==v.value.observaciones&&(f.value.informacion[S].data=ea)})})})}async function Ce(l,e){A.value=null,$.value=null,await Y.editar(l,{orden:e}),H()}async function Ve(l,e){P.value=null,O.value=null,C.value=null;const a={orden:e};switch(I.value){case v.value.actividadesDesarrolladas:await ae.editarDesarrollada(l._id,a);break;case v.value.evidencias:await ee.editarEvidencia(l._id,a);break;case v.value.observaciones:await Z.editarObservacion(l._id,a);break}await X(f.value.id)}function Ye(){sa.generarPDF(T.value._id,D.value,ne.value.nombre)}function pe(l){var e=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return e.test(l)}function Ze(l){O.value="",P.value=null}const i=(l,e)=>{l=="OK"?he.notify({color:"green-5",textColor:"white",icon:"mdi-check-bold",message:e}):he.notify({color:"red-5",textColor:"white",icon:"warning",message:e})};return Te(),Se(),(l,e)=>(s(),b("div",ca,[ne.value.estado?(s(),p(re,{key:1,class:"my-card"},{default:n(()=>[t(R,{class:"card-title-gestionar"},{default:n(()=>[d("div",ma,[fa,d("div",ba,[t(m,{size:"sm",color:"positive",onClick:e[0]||(e[0]=a=>Ye())},{default:n(()=>[V("Descargar Informe")]),_:1})])])]),_:1}),t(Ee,{"indicator-color":"white",modelValue:z.value,"onUpdate:modelValue":e[1]||(e[1]=a=>z.value=a),dense:"",class:"bg-primary text-white shadow-2","inline-label":"","outside-arrows":"","mobile-arrows":""},{default:n(()=>[(s(!0),b(N,null,q(D.value,(a,u)=>(s(),p(Ae,{key:u,label:a.nombre,name:a.nombre},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),t(xe,{class:"bg-blue-1",modelValue:z.value,"onUpdate:modelValue":e[2]||(e[2]=a=>z.value=a),animated:""},{default:n(()=>[(s(!0),b(N,null,q(D.value,(a,u)=>(s(),p(De,{key:u,name:a.nombre},{default:n(()=>[(s(),p(oa,{dense:"",columns:Pe,rows:a.actividadesEspecificas,"row-key":"name","no-data-label":"No existen actividades espec\xEDficas",key:"table-"+u,pagination:{rowsPerPage:10},"rows-per-page-options":[5,10,0],"rows-per-page-label":"Resultados por p\xE1gina"},{top:n(()=>[d("div",pa,[d("b",null,"Actividades de: "+y(z.value),1)]),t(m,{onClick:Be,size:"sm",class:"col-2 bton-lista-docente",color:"blue-7",style:{color:"white"}},{default:n(()=>[V("Nueva Actividad")]),_:1})]),header:n(o=>[t($e,{props:o},{default:n(()=>[(s(!0),b(N,null,q(o.cols,g=>(s(),p(Qe,{key:g.name,props:o},{default:n(()=>[V(y(g.label),1)]),_:2},1032,["props"]))),128)),t(Qe,{"auto-width":""},{default:n(()=>[V("Acciones")]),_:1})]),_:2},1032,["props"])]),body:n(o=>[t($e,{props:o},{default:n(()=>[(s(!0),b(N,null,q(o.cols,g=>(s(),p(Ie,{key:g.name,props:o},{default:n(()=>[V(y(g.value),1)]),_:2},1032,["props"]))),128)),t(Ie,{align:"center","auto-width":"",class:"q-pa-md q-gutter-xs"},{default:n(()=>[d("div",ga,[t(m,{size:"sm",color:"positive",round:"",dense:"",icon:"mdi-folder-edit",onClick:g=>Xe(o.row._id,o.row.nombre)},null,8,["onClick"]),t(we,{offset:[10,10],class:"bg-indigo"},{default:n(()=>[V(" Gestionar campos actividad ")]),_:1})]),d("div",wa,[t(m,{size:"sm",color:"warning",round:"",dense:"",onClick:g=>He(o),icon:"mdi-file-document-edit"},null,8,["onClick"]),t(we,{offset:[10,10],class:"bg-indigo"},{default:n(()=>[V(" Editar informaci\xF3n actividad ")]),_:1})]),d("div",_a,[t(m,{size:"sm",color:"negative",round:"",dense:"",onClick:g=>Re(o.row),icon:"mdi-delete"},null,8,["onClick"]),t(we,{offset:[10,10],class:"bg-indigo"},{default:n(()=>[V(" Eliminar actividad ")]),_:1})])]),_:2},1024)]),_:2},1032,["props"])]),_:2},1032,["rows"]))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),d("div",Oa,[d("b",null,y(v.value.conclusiones),1)]),t(R,{class:"q-px-lg bg-blue-1"},{default:n(()=>[t(Ke,{bordered:"",separator:"",dense:"",class:"bg-white"},{default:n(()=>[t(ie,null,{default:n(()=>[t(se,{caption:""},{default:n(()=>[t(ue,null,{default:n(()=>[t(x,{"bottom-slots":"",modelValue:Q.value,"onUpdate:modelValue":e[4]||(e[4]=a=>Q.value=a),label:`Agregar ${v.value.conclusiones}`,dense:"",type:"text",autogrow:"",rules:[a=>a&&a.length>0||a==null||"Complete este campo"]},{append:n(()=>[Q.value!==""&&Q.value!=null?(s(),p(F,{key:0,name:"close",onClick:e[3]||(e[3]=a=>Q.value=null),class:"cursor-pointer"})):_("",!0),t(m,{round:"",dense:"",flat:"",icon:"add",onClick:Me})]),_:1},8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(s(!0),b(N,null,q(ve.value,(a,u)=>(s(),p(ie,{key:u},{default:n(()=>[t(se,null,{default:n(()=>[t(ue,null,{default:n(()=>[d("div",ha,[$.value!=u?(s(),b("div",ka,[t(m,{flat:"",icon:"mdi-chevron-up",color:"grey-7",size:"xs",round:"",disable:u==0,onClick:o=>Ce(a._id,u+1-1)},null,8,["disable","onClick"]),t(m,{flat:"",icon:"mdi-chevron-down",color:"grey-7",size:"xs",round:"",disable:u==ve.value.length-1,onClick:o=>Ce(a._id,u+1+1)},null,8,["disable","onClick"])])):_("",!0),$.value!=u?(s(),b("div",ya,[d("b",null,y(u+1+". "),1)])):_("",!0),$.value!=u?(s(),b(N,{key:2},[d("div",Ca,y(a.nombre),1),d("div",Va,[t(m,{color:"amber",flat:"",round:"",size:"sm",icon:"mdi-file-edit-outline",onClick:o=>{$.value=u,A.value=a.nombre}},null,8,["onClick"]),t(m,{color:"red",flat:"",round:"",size:"sm",icon:"mdi-trash-can-outline",onClick:o=>Le(a._id)},null,8,["onClick"])])],64)):(s(),b(N,{key:3},[d("div",Na,[t(x,{"bottom-slots":"",modelValue:A.value,"onUpdate:modelValue":e[5]||(e[5]=o=>A.value=o),label:"Editar",dense:"",autogrow:"",rules:[o=>o&&o.length>0||o==null||"Este campo no puede estar vac\xEDo"]},null,8,["modelValue","rules"])]),d("div",Ka,[t(m,{color:"positive",flat:"",round:"",size:"sm",icon:"mdi-check-bold",onClick:o=>Ge(a._id)},null,8,["onClick"]),t(m,{color:"red",flat:"",round:"",size:"sm",icon:"close",onClick:e[6]||(e[6]=o=>$.value=null)})])],64))])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(ge,{modelValue:ce.value,"onUpdate:modelValue":e[29]||(e[29]=a=>ce.value=a),persistent:""},{default:n(()=>[t(re,{style:{"max-width":"700px"}},{default:n(()=>[t(R,{class:"card-title-gestionar"},{default:n(()=>[d("div",Ea,"Actividad Especifica: "+y(f.value.nombre),1)]),_:1}),t(Ee,{"onUpdate:modelValue":[Ze,e[7]||(e[7]=a=>I.value=a)],"indicator-color":"secondary",modelValue:I.value,dense:"","outside-arrows":"","mobile-arrows":"",class:"bg-primary text-white shadow-2","inline-label":"","no-caps":""},{default:n(()=>[(s(!0),b(N,null,q(f.value.informacion,(a,u)=>(s(),p(Ae,{key:u,name:a.nombre,label:a.nombre},null,8,["name","label"]))),128))]),_:1},8,["modelValue"]),t(R,{style:{"max-height":"50vh","min-height":"50vh","max-width":"550px"},class:"scroll no-margin no-padding"},{default:n(()=>[t(xe,{modelValue:I.value,"onUpdate:modelValue":e[27]||(e[27]=a=>I.value=a)},{default:n(()=>[(s(!0),b(N,null,q(f.value.informacion,(a,u)=>(s(),p(De,{key:u,name:a.nombre},{default:n(()=>[t(Ke,{bordered:"",separator:"",dense:""},{default:n(()=>[t(ie,null,{default:n(()=>[t(se,null,{default:n(()=>[t(ue,null,{default:n(()=>[a.nombre==v.value.actividadesDesarrolladas?(s(),p(x,{key:0,"bottom-slots":"",modelValue:K.value,"onUpdate:modelValue":e[10]||(e[10]=o=>K.value=o),label:"Nueva actividad desarrollada",dense:"",autogrow:"",rules:[o=>o&&o.length>0||o==null||"Complete este campo"]},{append:n(()=>[K.value!==""&&K.value!=null?(s(),p(F,{key:0,name:"close",onClick:e[8]||(e[8]=o=>K.value=null),class:"cursor-pointer"})):_("",!0),t(m,{onClick:e[9]||(e[9]=o=>be(f.value.id)),round:"",dense:"",flat:"",icon:"add"})]),_:1},8,["modelValue","rules"])):_("",!0),a.nombre==v.value.evidencias?(s(),p(x,{key:1,"bottom-slots":"",modelValue:h.value,"onUpdate:modelValue":e[13]||(e[13]=o=>h.value=o),label:"Nueva evidencia",dense:"",rules:[o=>o&&o.length>0||o==null||"Complete este campo"],autogrow:""},{append:n(()=>[h.value!==""&&h.value!=null?(s(),p(F,{key:0,name:"close",onClick:e[11]||(e[11]=o=>h.value=null),class:"cursor-pointer"})):_("",!0),t(m,{onClick:e[12]||(e[12]=o=>be(f.value.id)),round:"",dense:"",flat:"",icon:"add"})]),_:1},8,["modelValue","rules"])):_("",!0),a.nombre==v.value.observaciones?(s(),p(_e,{key:2,onSubmit:e[18]||(e[18]=o=>be(f.value.id)),dense:""},{default:n(()=>[t(x,{"bottom-slots":"",modelValue:E.value,"onUpdate:modelValue":e[15]||(e[15]=o=>E.value=o),dense:"",label:"Nueva observaci\xF3n",autogrow:"",rules:[o=>o&&o.length>0||o==null||"Complete este campo"]},{append:n(()=>[E.value!==""&&E.value!=null?(s(),p(F,{key:0,name:"close",onClick:e[14]||(e[14]=o=>E.value=null),class:"cursor-pointer"})):_("",!0)]),_:1},8,["modelValue","rules"]),d("div",xa,[d("div",Aa,[t(x,{"bottom-slots":"",modelValue:k.value,"onUpdate:modelValue":e[17]||(e[17]=o=>k.value=o),label:"Enlace (opcional)",hint:"Formato http:// o https://",dense:"",autogrow:"",rules:[o=>o==""||o==null||o&&o.length>0&&pe(o)||"No es un enlace v\xE1lido"]},{append:n(()=>[k.value!==""&&k.value!=null?(s(),p(F,{key:0,name:"close",onClick:e[16]||(e[16]=o=>k.value=null),class:"cursor-pointer"})):_("",!0)]),_:1},8,["modelValue","rules"])]),d("div",Da,[t(m,{class:"q-mt-md",type:"submit",color:"grey-7",dense:"",flat:"",round:"",icon:"add"})])])]),_:1})):_("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024),(s(!0),b(N,null,q(a.data,(o,g)=>(s(),p(ie,{key:g},{default:n(()=>[t(se,null,{default:n(()=>[t(ue,null,{default:n(()=>[d("div",Qa,[P.value!=g?(s(),b("div",$a,[t(m,{flat:"",icon:"mdi-chevron-up",color:"grey-7",size:"xs",round:"",disable:g==0,onClick:r=>Ve(o,g+1-1)},null,8,["disable","onClick"]),t(m,{flat:"",icon:"mdi-chevron-down",color:"grey-7",size:"xs",round:"",disable:g==a.data.length-1,onClick:r=>Ve(o,g+1+1)},null,8,["disable","onClick"])])):_("",!0),P.value!=g?(s(),b("div",Ia,[d("b",null,y(g+1+". "),1)])):_("",!0),P.value!=g?(s(),b(N,{key:2},[o.enlace?(s(),b("div",Ua,[V(y(o.nombre)+" ",1),t(m,{tag:"a",href:o.enlace,target:"_blank",size:"xs",icon:"mdi-link",flat:"",color:"blue-12"},null,8,["href"])])):(s(),b("div",za,y(o.nombre),1)),d("div",Pa,[t(m,{color:"amber",flat:"",round:"",size:"xs",icon:"mdi-file-edit-outline",onClick:r=>{P.value=g,O.value=o.nombre,C.value=o.enlace?o.enlace:null}},null,8,["onClick"]),t(m,{color:"red",flat:"",round:"",size:"xs",icon:"mdi-trash-can-outline",onClick:r=>We(o._id)},null,8,["onClick"])])],64)):(s(),b(N,{key:3},[a.nombre==v.value.observaciones?(s(),b("div",Sa,[a.nombre==v.value.observaciones?(s(),p(_e,{key:0,onSubmit:e[23]||(e[23]=r=>ye(f.value.id)),dense:""},{default:n(()=>[t(x,{"bottom-slots":"",modelValue:O.value,"onUpdate:modelValue":e[20]||(e[20]=r=>O.value=r),label:"Editar",dense:"",autogrow:"",rules:[r=>r&&r.length>0||r==null||"Complete este campo"]},{append:n(()=>[O.value!==""&&O.value!=null?(s(),p(F,{key:0,name:"close",onClick:e[19]||(e[19]=r=>O.value=null),class:"cursor-pointer"})):_("",!0)]),_:1},8,["modelValue","rules"]),t(x,{"bottom-slots":"",modelValue:C.value,"onUpdate:modelValue":e[22]||(e[22]=r=>C.value=r),label:"Enlace (opcional)",hint:"Formato http:// o https://",dense:"",autogrow:"",rules:[r=>r==""||r==null||r&&r.length>0&&pe(r)||"No es un enlace v\xE1lido"]},{append:n(()=>[C.value!==""&&C.value!=null?(s(),p(F,{key:0,name:"close",onClick:e[21]||(e[21]=r=>C.value=null),class:"cursor-pointer"})):_("",!0)]),_:1},8,["modelValue","rules"])]),_:1})):_("",!0)])):(s(),b("div",qa,[t(x,{"bottom-slots":"",modelValue:O.value,"onUpdate:modelValue":e[25]||(e[25]=r=>O.value=r),style:{width:"100%"},width:"100%",dense:"",autogrow:"",rules:[r=>r&&r.length>0||r==null||"Este campo no puede estar vacio"]},{append:n(()=>[h.value!==""&&h.value!=null?(s(),p(F,{key:0,name:"close",onClick:e[24]||(e[24]=r=>h.value=null),class:"cursor-pointer"})):_("",!0)]),_:1},8,["modelValue","rules"])])),d("div",Fa,[t(m,{color:"positive",flat:"",round:"",size:"sm",icon:"mdi-check-bold",onClick:r=>ye(o._id)},null,8,["onClick"]),t(m,{color:"red",flat:"",round:"",size:"sm",icon:"close",onClick:e[26]||(e[26]=r=>P.value=null)})])],64))])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(Oe),t(ze,{align:"right"},{default:n(()=>[Ne(t(m,{flat:"",label:"Cerrar",color:"negative",onClick:e[28]||(e[28]=a=>J())},null,512),[[Ue]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ge,{modelValue:M.value,"onUpdate:modelValue":e[33]||(e[33]=a=>M.value=a)},{default:n(()=>[t(re,{style:{"max-width":"400px"}},{default:n(()=>[t(R,{class:"card-title-gestionar"},{default:n(()=>[d("div",Ta,[V(y(me.value),1),d("b",null,y(z.value),1)])]),_:1}),t(Oe),t(R,null,{default:n(()=>[t(_e,{onSubmit:Je,class:"q-gutter-md"},{default:n(()=>[t(ta,{filled:"",modelValue:U.value,"onUpdate:modelValue":e[30]||(e[30]=a=>U.value=a),options:oe.value,label:"Actividad del Distributivo",rules:[a=>a&&a.length>0||"Seleccione una actividad del distributivo"]},null,8,["modelValue","options","rules"]),t(x,{filled:"",modelValue:j.value,"onUpdate:modelValue":e[31]||(e[31]=a=>j.value=a),label:"Nombre de la actividad especifica",hint:U.value+"-"+j.value.replace(/\s+/g,"_"),"lazy-rules":"",rules:[a=>a&&a.length>0||"Ingrese el nombre de la actividad"]},null,8,["modelValue","hint","rules"]),t(x,{filled:"",type:"number",modelValue:G.value,"onUpdate:modelValue":e[32]||(e[32]=a=>G.value=a),label:"Horas","lazy-rules":"",rules:[a=>a!==null&&a!==""||"Ingrese el n\xFAmero de horas planificadas",a=>a>0||"Ingrese el n\xFAmero de horas planificadas"]},null,8,["modelValue","rules"]),t(Oe),d("div",null,[t(m,{label:"Cancelar",onClick:W,flat:"",color:"negative",class:"q-ml-sm"}),t(m,{label:"Guardar",type:"submit",color:"positive"})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ge,{modelValue:B.value,"onUpdate:modelValue":e[36]||(e[36]=a=>B.value=a),persistent:""},{default:n(()=>[t(re,null,{default:n(()=>[t(R,{class:"row items-center"},{default:n(()=>[t(la,{icon:"warning",color:"warning","text-color":"white"}),d("span",Ra,[V("\xBFEst\xE1 seguro en eliminar la actividad especifica "),d("b",null,y(te.value.nombre),1),V("?")])]),_:1}),t(ze,{align:"right"},{default:n(()=>[Ne(t(m,{flat:"",label:"Cancel",color:"negative",onClick:e[34]||(e[34]=a=>B.value=!1)},null,512),[[Ue]]),t(m,{flat:"",label:"Aceptar",color:"primary",onClick:e[35]||(e[35]=a=>je())})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})):(s(),b("h6",va,"No existe un periodo academico activo"))]))}};export{nl as default};
